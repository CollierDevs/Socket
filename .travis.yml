language: shell
services:
- docker
os: linux
dist: bionic
cache: npm
install:
- docker build -t socket-bot .
deploy:
  provider: gae
  keyfile: client-secret.json
  project: light-lambda-245521
  on:
    all_branches: true
before_install:
- echo $DISCORD_TOKEN > .env
- openssl aes-256-cbc -K $encrypted_75ef5263a21f_key -iv $encrypted_75ef5263a21f_iv
  -in client-secret.json.enc -out client-secret.json -d
